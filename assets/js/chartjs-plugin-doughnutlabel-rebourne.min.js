!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("chart.js/helpers"),require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js/helpers","chart.js"],t):e.DoughnutLabel=t(e.Chart.helpers,e.Chart)}(this,function(p,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var y={font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},paddingPercentage:10,display:!0,api:"beforeDatasetDraw",color:"#000000"},v={parseFont:function(e){var t=n.defaults,i=p.valueOrDefault(e.size,t.font.size),e={family:p.valueOrDefault(e.family,t.font.family),lineHeight:p.toLineHeight(e.lineHeight,i),size:i,style:p.valueOrDefault(e.style,t.font.style),weight:p.valueOrDefault(e.weight,null),string:""};return e.string=v.toFontString(e),e},toFontString:function(e){if(!e||p.isNullOrUndef(e.size)||p.isNullOrUndef(e.family))return null;const t=new RegExp("^[0-9]+$");if(!t.test(e.size)&&"number"!=typeof e.size)throw"Invalid font size value! Only pixels allowed!";return(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family},textSize:function(e,t){for(var i=[].concat(t),n=i.length,t=e.font,o=0,l=0,r=0;r<n;++r)e.font=i[r].font.string,o=Math.max(e.measureText(i[r].text).width,o),l+=i[r].font.lineHeight;return e.font=t,{height:l,width:o}}};return{id:"doughnutlabel",beforeInit:function(e,t,i){e=e.ctx;this[p.resolve([i.api,y.api],e,0)]=this._drawLabels},_drawLabels:function(i,e,n){if(n&&n.labels&&0<n.labels.length){var o=i.ctx,l=[];n.labels.forEach(e=>{var t;t=e,p.resolve([t.display,n.display,y.display],o,0)&&(e={text:"function"==typeof e.text?e.text(i):e.text,font:v.parseFont(p.resolve([e.font,n.font,y.font],o,0)),color:p.resolve([e.color,n.color,y.color],o,0)},l.push(e))});var t=v.textSize(o,l),r=1-p.resolve([n.paddingPercentage,y.paddingPercentage],o,0)/100,a=Math.sqrt(Math.pow(t.width,2)+Math.pow(t.height,2)),f=2*e.meta.controller.innerRadius/a*r;f<1&&(l.forEach(function(e){e.font.size=Math.floor(e.font.size*f),e.font.lineHeight=void 0,e.font=v.parseFont(e.font)}),t=v.textSize(o,l)),o.textAlign="center",o.textBaseline="middle";for(var s=(i.chartArea.left+i.chartArea.right)/2,h=(i.chartArea.top+i.chartArea.bottom)/2-t.height/2,u=l.length,d=0,c=0;c<u;++c){o.fillStyle=l[c].color,o.font=l[c].font.string;var g=h+l[c].font.lineHeight/2+d;d+=l[c].font.lineHeight,o.fillText(l[c].text,s,g)}}}}});